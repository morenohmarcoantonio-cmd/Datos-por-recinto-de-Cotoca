<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <title>Mapa de Recintos - Cotoca</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        body { margin: 0; padding: 0; }
        #map { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    <script>
        const datosRecintos = {
            "Escuela Colegio Manuel Angel Cortez": { votos: 3619, libre: "34.46%", pdc: "65.54%" },
            "Escuela Colegio Lorenzo Cortez Rivera": { votos: 4712, libre: "70.76%", pdc: "29.24%" },
            "Escuela Col. San Marcos": { votos: 5245, libre: "60.70%", pdc: "39.30%" },
            "Colegio Nal. Benemeritos de La Patria": { votos: 5110, libre: "29.06%", pdc: "70.94%" },
            "Escuela Callejas": { votos: 1448, libre: "70.09%", pdc: "21.91%" },
            "U.E. San Antonio": { votos: 1193, libre: "65.21%", pdc: "34.79%" },
            "U.E. Patuju": { votos: 1451, libre: "73.60%", pdc: "" },
            "Escuela Rep. de Mexico": { votos: 2231, libre: "18.65%", pdc: "81.35%" },
            "U.E. Don Lorenzo": { votos: 1451, libre: "73.60%", pdc: "26.40%" },
            "Unidad Educativa Fidel Saucedo": { votos: 1916, libre: "57.93%", pdc: "42.07%" },
            "Esc. Mariscal Antonio Jose De Sucre": { votos: 1812, libre: "73.31%", pdc: "27.69%" },
            "Escuela U.E Club Social 24 de Septiembre": { votos: 4356, libre: "62.58%", pdc: "37.42%" },
            "U. E. Ciudadela Nueva Jerusalén": { votos: 1618, libre: "56.24%", pdc: "43.76%" },
            "Escuela Unidad Educativa Oscar Alfaro": { votos: 2292, libre: "18.89%", pdc: "81.02%" },
            "U.E. La  Cruceña": { votos: 304, libre: "67.76%", pdc: "32.24%" },
            "Escuela German Busch": { votos: 1476, libre: "31.92%", pdc: "68.08%" },
            "Escuela Demetrio Añez": { votos: 2887, libre: "52.50%", pdc: "47.50%" },
            "Esc. Gremial Cortez": { votos: 1191, libre: "55.06%", pdc: "44.92%" },
            "U.E. 6 de Agosto": { votos: 1058, libre: "43.67%", pdc: "56.33%" }
        };

        const map = L.map('map').setView([-17.75, -63.1], 12);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        fetch('mapaCotoca.geojson')
            .then(response => response.json())
            .then(data => {
                L.geoJSON(data, {
                    onEachFeature: function(feature, layer) {
                        const nombre = feature.properties.Recinto;
                        const info = datosRecintos[nombre];

                        let popup = `<b>${nombre}</b>`;
                        if (info) {
                            popup += `<br><b>Total votos:</b> ${info.votos}`;
                            popup += `<br><b>Votos LIBRE:</b> ${info.libre}`;
                            popup += `<br><b>Votos PDC:</b> ${info.pdc}`;
                        } else {
                            popup += `<br>No hay datos disponibles`;
                        }

                        layer.bindPopup(popup);
                    }
                }).addTo(map);
            });
    </script>
</body>
</html>
